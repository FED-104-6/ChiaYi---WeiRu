<aside *ngIf="isLoggedIn && (userRole === 'admin' || userRole === 'host')" class="sidebar">
  <div class="sidebar-header">
    <a class="logo" (click)="navigateHome()">BNB</a>
    <p>Management System</p>
    <div class="lang-switch">
      <button [class.active]="language === 'en'" (click)="setLanguage('en')">ENGLISH</button>
      <button [class.active]="language === 'zh'" (click)="setLanguage('zh')">CHINESE</button>
    </div>
  </div>

  <nav>
    <a [routerLink]="['/home']" (click)="closeMenus()">Home</a>

    <a *ngIf="userRole === 'admin'" [routerLink]="['/all-users']" (click)="closeMenus()">All Users</a>

    <a (click)="toggleProfileMenu()">Profile</a>
    <div *ngIf="profileMenuOpen" class="submenu">
      <a [routerLink]="['/update-profile']" (click)="closeMenus()">Update Profile</a>
    </div>

    <a (click)="toggleFlatsMenu()">Flats</a>
    <div *ngIf="flatsMenuOpen" class="submenu">
      <a [routerLink]="['/flats/search']" (click)="closeMenus()">Search Flats</a>
      <a [routerLink]="['/flats/new-flat']" (click)="closeMenus()">New Flat</a>
      <a [routerLink]="['/flats/my-flats']" (click)="closeMenus()">My Flats</a>
      <a *ngIf="userRole !== 'admin'" [routerLink]="['/flats/favourites']" (click)="closeMenus()">Favourites</a>
      <a *ngIf="userRole === 'admin'" [routerLink]="['/flats/view-flat']" (click)="closeMenus()">View Flat</a>
      <a *ngIf="userRole === 'host'" [routerLink]="['/flats/edit-flat']" (click)="closeMenus()">Edit Flat
</a>
    </div>

    <!-- 使用 getter 控制 Messages 顯示 -->
    <a *ngIf="showAdminMessages" [routerLink]="['/messages']" (click)="closeMenus()">Messages (Admin)</a>
    <a *ngIf="showMessages && userRole !== 'admin'" [routerLink]="['/my-messages']" (click)="closeMenus()">Messages</a>
    
    <a (click)="logout()">Logout</a>
  </nav>
</aside>